\hypertarget{boussinesq__convection_8txt}{}\doxysection{boussinesq\+\_\+convection.\+txt File Reference}
\label{boussinesq__convection_8txt}\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}} = \char`\"{}../../../multi\+\_\+physics/refine\+\_\+b\+\_\+convect/html/index.\+html\char`\"{}$>$single-\/domain$<$/a $>$ and$<$ a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../multi\+\_\+physics/multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convect/html/index.\+html\char`\"{}$>$multi-\/domain$<$/a $>$ approaches. It is part of a$<$ a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../example\+\_\+code\+\_\+list/html/index.\+html\#\mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}}\char`\"{}$>$ series of tutorials$<$/a $>$ that discuss how to modify existing serial driver codes so that the \textbackslash{}c Problem object can be \mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}} across multiple processors. Part \mbox{\hyperlink{boussinesq__convection_8txt_a96523c0123a943b4d4c5b5d298ee8faa}{II}} provides a more detailed discussion of the serial and parallel implementation of the various helper functions that may be used to set up multi-\/domain interactions.$<$ HR $>$$<$ HR $>$ \textbackslash{}section boussinesq Part I\+:\+Distributing the Boussinesq convection \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} For the single-\/domain discretisation of the Boussinesq convection \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}}, in which the Navier-\/-\/Stokes and advection-\/diffusion equations \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} combined using a single element, the procedure required to distribute the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} is exactly the same as that described in the$<$ a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../adaptive\+\_\+driven\+\_\+cavity/html/index.\+html\char`\"{}$>$adaptive driven cavity tutorial$<$/a $>$. We therefore omit a detailed discussion of the changes to the driver code but encourage you to compare the serial driver codes,$<$ center $>$$<$ a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../../demo\+\_\+drivers/multi\+\_\+physics/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+boussinesq\+\_\+convection.\+cc\char`\"{}$>$$<$ code $>$demo\+\_\+drivers/multi\+\_\+physics/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+boussinesq\+\_\+convection.\+cc$<$/code $>$$<$/a $>$$<$/center $>$ and$<$ center $>$$<$ a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../../demo\+\_\+drivers/multi\+\_\+physics/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convection.\+cc\char`\"{}$>$$<$ code $>$demo\+\_\+drivers/multi\+\_\+physics/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convection.\+cc$<$/code $>$$<$/a $>$$<$/center $>$ with \mbox{\hyperlink{boussinesq__convection_8txt_a2e32fc8f467783c204660c69fca90951}{their}} \mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}} counterparts,$<$ center $>$$<$ a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../../demo\+\_\+drivers/mpi/multi\+\_\+domain/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+boussinesq\+\_\+convection.\+cc\char`\"{}$>$$<$ code $>$demo\+\_\+drivers/mpi/multi\+\_\+domain/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+boussinesq\+\_\+convection.\+cc$<$/code $>$$<$/a $>$$<$/center $>$ and$<$ center $>$$<$ a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../../demo\+\_\+drivers/mpi/multi\+\_\+domain/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convection.\+cc\char`\"{}$>$$<$ code $>$demo\+\_\+drivers/mpi/multi\+\_\+domain/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+ref\+\_\+convection.\+cc$<$/code $>$$<$/a $>$.$<$/center $>$ The parallelisation of the$<$ a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../multi\+\_\+physics/multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convect/html/index.\+html\char`\"{}$>$ multi-\/domain driver code$<$/a $>$ is also quite straightforward. The key \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is that the interaction between the \mbox{\hyperlink{boussinesq__convection_8txt_aa9fc119ad80e517a5177a09808e399af}{domains}} must be set up again after the \mbox{\hyperlink{boussinesq__convection_8txt_acc34b8841d1c42cceb1770cc872fd126}{distribution}} of the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} because, on each processor, some of the \char`\"{}external elements\char`\"{} will have been deleted during the distribution. The required changes to the serial driver code \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} described below. \textbackslash{}subsection main\+\_\+body The main function The main function begins and ends with the usual calls to \textbackslash{}c M\+P\+I\+\_\+\+Helpers\+::init() and \textbackslash{}c M\+P\+I\+\_\+\+Helpers\+::finalize()
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} is \mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}} with a simple call to c apart from the addition of the c \mbox{\hyperlink{boussinesq__convection_8txt_a472f479ab997a5a2d889405dce0b7c39}{actions\+\_\+after\+\_\+distribute}} () function
\item 
the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} is \mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}} with a simple call to c apart from the addition of the c discussed below$<$ HR $>$ subsection actions\+\_\+after\+\_\+adapt Actions after adaptation The boundary conditions \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} such that a single pressure degree of freedom must be pinned after the adaptation Once the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} has been pinning the first pressure freedom in the first element no longer works because the first element will be different on each processor The required modifications mirror those in the$<$ a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../adaptive\+\_\+driven\+\_\+cavity/html/index.\+html\char`\"{}$>$ adaptive driven cavity \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}}$<$/a $>$ and ensure that the pressure is only pinned in the first element in the mesh by testing the Eulerian position of the element The remainder of the function is the same as in the serial driver code dontinclude multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convection cc skipline Actions after adaptation until$<$ HR $>$ subsection \mbox{\hyperlink{boussinesq__convection_8txt_a472f479ab997a5a2d889405dce0b7c39}{actions\+\_\+after\+\_\+distribute}} Actions after \mbox{\hyperlink{boussinesq__convection_8txt_acc34b8841d1c42cceb1770cc872fd126}{distribution}} After the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} the multi domain interactions must be set up again because some of the external elements may now only exist on other processors Such elements \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} re created locally as external halo elements when c the c \mbox{\hyperlink{boussinesq__convection_8txt_a8cb7bc96a2ec61fe51b7b81e7ca542df}{doc\+\_\+solution}} () function is modified by adding the processor ID to each output file
\item 
namespace also provides functions that can be used for problems in which the interacting \mbox{\hyperlink{boussinesq__convection_8txt_aa9fc119ad80e517a5177a09808e399af}{domains}} meet at a lower dimensional interface$<$ em $>$ e g$<$/em $>$ in fluid structure interaction problems The functions have a sensible default behaviour and can be used as block box routines We provide a brief overview of \mbox{\hyperlink{boussinesq__convection_8txt_a2e32fc8f467783c204660c69fca90951}{their}} (serial and parallel) implementation
\item 
\mbox{\hyperlink{boussinesq__convection_8txt_a3fd838e673976f66edb6467367d128e7}{endcode}} (note the singular) sets up a one-\/way interaction in which the mesh pointed to by \textbackslash{}c external\+\_\+mesh\+\_\+pt provides the \char`\"{}external elements\char`\"{}(of type \textbackslash{}c E\+X\+T\+\_\+\+E\+L\+E\+M\+E\+NT) for the \textbackslash{}c Element\+With\+External\+Elements stored in \textbackslash{}c mesh\+\_\+pt
\item 
but not vice versa In the two way interaction described above is performed by two successive calls to this function code \mbox{\hyperlink{boussinesq__convection_8txt_a15a095909692c48e1e31dac9df3387a3}{setup\+\_\+multi\+\_\+domain\+\_\+interaction$<$ E\+L\+E\+M\+E\+N\+T\+\_\+1 $>$}} (problem\+\_\+pt, \mbox{\hyperlink{boussinesq__convection_8txt_a707b60a792e911d3fa7d844de3c21d8a}{first\+\_\+mesh\+\_\+pt}}, \mbox{\hyperlink{boussinesq__convection_8txt_ae55dc27b6a9169b989fbdb65e21a2e98}{second\+\_\+mesh\+\_\+pt}})
\item 
\mbox{\hyperlink{boussinesq__convection_8txt_ad0de0d1da8264c20e566a642a54e36a5}{setup\+\_\+multi\+\_\+domain\+\_\+interaction$<$ E\+L\+E\+M\+E\+N\+T\+\_\+0 $>$}} (problem\+\_\+pt, \mbox{\hyperlink{boussinesq__convection_8txt_ae55dc27b6a9169b989fbdb65e21a2e98}{second\+\_\+mesh\+\_\+pt}}, \mbox{\hyperlink{boussinesq__convection_8txt_a707b60a792e911d3fa7d844de3c21d8a}{first\+\_\+mesh\+\_\+pt}})
\item 
\mbox{\hyperlink{boussinesq__convection_8txt_a3fd838e673976f66edb6467367d128e7}{endcode}} may be used to set up multi domain interactions for problems in which the interaction occurs across the boundaries of adjacent \mbox{\hyperlink{boussinesq__convection_8txt_aa9fc119ad80e517a5177a09808e399af}{domains}} ($<$ em $>$ e.\+g.$<$/em $>$ in F\+SI problems where the fluid and solid domains meet along a lower-\/dimensional interface). We do not anticipate that users will have to call this function directly
\item 
it is called internally by the function c the helper functions convert the mesh containing the external elements into a c Mesh\+As\+Geom\+Object a compound c Geom\+Object in which the constituent finite elements act as sub c Geom\+Objects Given the Eulerian coordinates of a target the function c calling c Finite\+Element\+::locate\+\_\+zeta(...) until the required \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is located. The function \textbackslash{}c Finite\+Element the efficiency gains \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} achieved by choosing a sensible search order so that the element containing the \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is found quickly$<$ hr $>$ subsection impl \mbox{\hyperlink{boussinesq__convection_8txt_afcb00508eab2699b3a51cb4082385eaf}{Basic}} (serial) implementation To make the search process efficient
\item 
the sampling points in the same as the element s plot points and \mbox{\hyperlink{boussinesq__convection_8txt_a2e32fc8f467783c204660c69fca90951}{their}} number may be obtained from the c even if the target \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is contained in the element Increasing the number of sampling points ensures that more of them \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} close to the target thus improving the chances that the Newton method will converge An increase in the number of sampling points can lead to a significant increase in the multi domain setup however In the present the elements \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} only stretched in the coordinate directions so a small number of sample points per element the setup of the multi domain interactions tends to be relatively \mbox{\hyperlink{boussinesq__convection_8txt_ad682b707a17e76aa2dbaafda5eb1ea91}{cheap}} (compared to other phases of a typical computation) so in most cases the default settings for above parameters \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} perfectly adequate.$<$ HR $>$$<$ HR $>$ \textbackslash{}section sources Source files for this tutorial The full parallel driver code for the \mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}}
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
mainpage Parallel solution of the Boussinesq convection problem Part I of this document provides an overview of how to distribute the Boussinesq convection \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}}
\item 
the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} is distributed with a simple call to c apart from the addition of the c discussed below$<$ HR $>$ subsection actions\+\_\+after\+\_\+adapt Actions after adaptation The boundary conditions \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} such that a single pressure degree of freedom must be pinned after the adaptation Once the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} has been \mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}}
\item 
the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} is \mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}} with a simple call to c apart from the addition of the c discussed below$<$ HR $>$ subsection actions\+\_\+after\+\_\+adapt Actions after adaptation The boundary conditions \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} such that a single pressure degree of freedom must be pinned after the adaptation Once the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} has been pinning the first pressure freedom in the first element no longer works because the first element will be different on each processor The required modifications mirror those in the$<$ a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../adaptive\+\_\+driven\+\_\+cavity/html/index.\+html\char`\"{}$>$ adaptive driven cavity \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}}$<$/a $>$ and ensure that the pressure is only pinned in the first element in the mesh by testing the Eulerian position of the element The remainder of the function is the same as in the serial driver code dontinclude multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convection cc skipline Actions after adaptation until$<$ HR $>$ subsection \mbox{\hyperlink{boussinesq__convection_8txt_a472f479ab997a5a2d889405dce0b7c39}{actions\+\_\+after\+\_\+distribute}} Actions after distribution After the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} \mbox{\hyperlink{boussinesq__convection_8txt_acc34b8841d1c42cceb1770cc872fd126}{distribution}}
\item 
the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} is \mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}} with a simple call to c apart from the addition of the c discussed below$<$ HR $>$ subsection actions\+\_\+after\+\_\+adapt Actions after adaptation The boundary conditions \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} such that a single pressure degree of freedom must be pinned after the adaptation Once the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} has been pinning the first pressure freedom in the first element no longer works because the first element will be different on each processor The required modifications mirror those in the$<$ a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../adaptive\+\_\+driven\+\_\+cavity/html/index.\+html\char`\"{}$>$ adaptive driven cavity \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}}$<$/a $>$ and ensure that the pressure is only pinned in the first element in the mesh by testing the Eulerian position of the element The remainder of the function is the same as in the serial driver code dontinclude multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convection cc skipline Actions after adaptation until$<$ HR $>$ subsection \mbox{\hyperlink{boussinesq__convection_8txt_a472f479ab997a5a2d889405dce0b7c39}{actions\+\_\+after\+\_\+distribute}} Actions after \mbox{\hyperlink{boussinesq__convection_8txt_acc34b8841d1c42cceb1770cc872fd126}{distribution}} After the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} the multi domain interactions must be set up again because some of the external elements may now only exist on other processors Such elements \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} re created locally as external halo elements when c the c ensuring that output from one processor does not overwrite that from another$<$ HR $>$ The remainder of the driver code is identical to the$<$ a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../multi\+\_\+physics/multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convect/html/index.\+html\char`\"{}$>$ serial version$<$/a $>$$<$ HR $>$$<$ HR $>$ section multi\+\_\+domain Part \mbox{\hyperlink{boussinesq__convection_8txt_a96523c0123a943b4d4c5b5d298ee8faa}{II}}
\item 
\mbox{\hyperlink{boussinesq__convection_8txt_a3fd838e673976f66edb6467367d128e7}{endcode}} sets up a two way interaction between two \mbox{\hyperlink{boussinesq__convection_8txt_aa9fc119ad80e517a5177a09808e399af}{domains}} of the same spatial dimension represented by c \mbox{\hyperlink{boussinesq__convection_8txt_a707b60a792e911d3fa7d844de3c21d8a}{first\+\_\+mesh\+\_\+pt}}
\item 
\mbox{\hyperlink{boussinesq__convection_8txt_a3fd838e673976f66edb6467367d128e7}{endcode}} sets up a two way interaction between two \mbox{\hyperlink{boussinesq__convection_8txt_aa9fc119ad80e517a5177a09808e399af}{domains}} of the same spatial dimension represented by c a mesh of elements of type c \mbox{\hyperlink{boussinesq__convection_8txt_ac99f9c2c12c1f839d9e86af1b927ca3a}{E\+L\+E\+M\+E\+N\+T\+\_\+0}}
\item 
\mbox{\hyperlink{boussinesq__convection_8txt_a3fd838e673976f66edb6467367d128e7}{endcode}} sets up a two way interaction between two \mbox{\hyperlink{boussinesq__convection_8txt_aa9fc119ad80e517a5177a09808e399af}{domains}} of the same spatial dimension represented by c a mesh of elements of type c and c \mbox{\hyperlink{boussinesq__convection_8txt_ae55dc27b6a9169b989fbdb65e21a2e98}{second\+\_\+mesh\+\_\+pt}}
\item 
but not vice versa In \mbox{\hyperlink{boussinesq__convection_8txt_acb4d2c18c1a61d70a43f645f925a9f9a}{fact}}
\item 
\mbox{\hyperlink{boussinesq__convection_8txt_a3fd838e673976f66edb6467367d128e7}{endcode}} \mbox{\hyperlink{boussinesq__convection_8txt_ad241ac225845f23822dafee8cce67441}{Finally}}
\item 
it is called internally by the function c the helper functions convert the mesh containing the external elements into a c Mesh\+As\+Geom\+Object a compound c Geom\+Object in which the constituent finite elements act as sub c Geom\+Objects Given the Eulerian coordinates of a target \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}}
\item 
it is called internally by the function c the helper functions convert the mesh containing the external elements into a c Mesh\+As\+Geom\+Object a compound c Geom\+Object in which the constituent finite elements act as sub c Geom\+Objects Given the Eulerian coordinates of a target the function c calling c Finite\+Element\+::locate\+\_\+zeta(...) until the required \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is located. The function \textbackslash{}c Finite\+Element the efficiency gains \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} achieved by choosing a sensible search order so that the element containing the \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is found quickly$<$ hr $>$ subsection impl the constructor of the c Mesh\+As\+Geom\+Object automatically creates a bin structure that aids the identification of elements that \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} close to a given target \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} The setup of the bin structure is performed as \mbox{\hyperlink{boussinesq__convection_8txt_a31ddf705989d1e2674d2ff85f7166a89}{follows}}
\item 
it is called internally by the function c the helper functions convert the mesh containing the external elements into a c Mesh\+As\+Geom\+Object a compound c Geom\+Object in which the constituent finite elements act as sub c Geom\+Objects Given the Eulerian coordinates of a target the function c calling c Finite\+Element\+::locate\+\_\+zeta(...) until the required \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is located. The function \textbackslash{}c Finite\+Element the efficiency gains \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} achieved by choosing a sensible search order so that the element containing the \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is found quickly$<$ hr $>$ subsection impl the constructor of the c Mesh\+As\+Geom\+Object automatically creates a bin structure that aids the identification of elements that \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} close to a given target \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} The setup of the bin structure is performed as plus a small margin for \mbox{\hyperlink{boussinesq__convection_8txt_a208ac0b754fef0fba769b755935790d1}{safety}}
\item 
the sampling points \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}}
\item 
the sampling points in the same as the element s plot points and \mbox{\hyperlink{boussinesq__convection_8txt_a2e32fc8f467783c204660c69fca90951}{their}} number may be obtained from the c even if the target \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is contained in the element Increasing the number of sampling points ensures that more of them \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} close to the target thus improving the chances that the Newton method will converge An increase in the number of sampling points can lead to a significant increase in the multi domain setup \mbox{\hyperlink{boussinesq__convection_8txt_a9b2e8175b36ee8f31144378819b372c0}{times}}
\item 
the sampling points in the same as the element s plot points and \mbox{\hyperlink{boussinesq__convection_8txt_a2e32fc8f467783c204660c69fca90951}{their}} number may be obtained from the c even if the target \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is contained in the element Increasing the number of sampling points ensures that more of them \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} close to the target thus improving the chances that the Newton method will converge An increase in the number of sampling points can lead to a significant increase in the multi domain setup however In the present the elements \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} only stretched in the coordinate directions so a small number of sample points per element \mbox{\hyperlink{boussinesq__convection_8txt_ae02b9922a98c0abea6b360f394f66eec}{suffices}}
\end{DoxyCompactItemize}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}\label{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!href@{href}}
\index{href@{href}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{href}{href}}
{\footnotesize\ttfamily using \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}} =  \char`\"{}../../../multi\+\_\+physics/refine\+\_\+b\+\_\+convect/html/index.\+html\char`\"{}$>$single-\/domain$<$/a$>$ and $<$a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../multi\+\_\+physics/multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convect/html/index.\+html\char`\"{}$>$multi-\/domain$<$/a$>$ approaches. It is part of a $<$a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../example\+\_\+code\+\_\+list/html/index.\+html\#\mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}}\char`\"{}$>$ series of tutorials$<$/a$>$ that discuss how to modify existing serial driver codes so that the \textbackslash{}c Problem object can be \mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}} across multiple processors. Part \mbox{\hyperlink{boussinesq__convection_8txt_a96523c0123a943b4d4c5b5d298ee8faa}{II}} provides a more detailed discussion of the serial and parallel implementation of the various helper functions that may be used to set up multi-\/domain interactions. $<$HR$>$ $<$HR$>$ \textbackslash{}section boussinesq Part I\+: Distributing the Boussinesq convection \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} For the single-\/domain discretisation of the Boussinesq convection \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}}, in which the Navier-\/-\/Stokes and advection-\/diffusion equations \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} combined using a single element, the procedure required to distribute the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} is exactly the same as that described in the $<$a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../adaptive\+\_\+driven\+\_\+cavity/html/index.\+html\char`\"{}$>$adaptive driven cavity tutorial$<$/a$>$. We therefore omit a detailed discussion of the changes to the driver code but encourage you to compare the serial driver codes, $<$center$>$ $<$a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../../demo\+\_\+drivers/multi\+\_\+physics/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+boussinesq\+\_\+convection.\+cc\char`\"{}$>$$<$code$>$demo\+\_\+drivers/multi\+\_\+physics/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+boussinesq\+\_\+convection.\+cc$<$/code$>$$<$/a$>$ $<$/center$>$ and $<$center$>$ $<$a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../../demo\+\_\+drivers/multi\+\_\+physics/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convection.\+cc\char`\"{}$>$$<$code$>$demo\+\_\+drivers/multi\+\_\+physics/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convection.\+cc$<$/code$>$$<$/a$>$ $<$/center$>$ with \mbox{\hyperlink{boussinesq__convection_8txt_a2e32fc8f467783c204660c69fca90951}{their}} \mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}} counterparts, $<$center$>$ $<$a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../../demo\+\_\+drivers/mpi/multi\+\_\+domain/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+boussinesq\+\_\+convection.\+cc\char`\"{}$>$$<$code$>$demo\+\_\+drivers/mpi/multi\+\_\+domain/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+boussinesq\+\_\+convection.\+cc$<$/code$>$$<$/a$>$ $<$/center$>$ and $<$center$>$ $<$a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../../demo\+\_\+drivers/mpi/multi\+\_\+domain/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convection.\+cc\char`\"{}$>$$<$code$>$demo\+\_\+drivers/mpi/multi\+\_\+domain/boussinesq\+\_\+convection/multi\+\_\+domain\+\_\+ref\+\_\+convection.\+cc$<$/code$>$$<$/a$>$. $<$/center$>$ The parallelisation of the $<$a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../multi\+\_\+physics/multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convect/html/index.\+html\char`\"{}$>$ multi-\/domain driver code $<$/a$>$ is also quite straightforward. The key \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is that the interaction between the \mbox{\hyperlink{boussinesq__convection_8txt_aa9fc119ad80e517a5177a09808e399af}{domains}} must be set up again after the \mbox{\hyperlink{boussinesq__convection_8txt_acc34b8841d1c42cceb1770cc872fd126}{distribution}} of the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} because, on each processor, some of the \char`\"{}external elements\char`\"{} will have been deleted during the distribution. The required changes to the serial driver code \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} described below. \textbackslash{}subsection main\+\_\+body The main function The main function begins and ends with the usual calls to \textbackslash{}c M\+P\+I\+\_\+\+Helpers\+::init() and \textbackslash{}c M\+P\+I\+\_\+\+Helpers\+::finalize()}



Definition at line 65 of file boussinesq\+\_\+convection.\+txt.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{boussinesq__convection_8txt_a472f479ab997a5a2d889405dce0b7c39}\label{boussinesq__convection_8txt_a472f479ab997a5a2d889405dce0b7c39}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!actions\_after\_distribute@{actions\_after\_distribute}}
\index{actions\_after\_distribute@{actions\_after\_distribute}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{actions\_after\_distribute()}{actions\_after\_distribute()}}
{\footnotesize\ttfamily the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} is \mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}} with a simple call to c apart from the addition of the c actions\+\_\+after\+\_\+distribute (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{boussinesq__convection_8txt_afcb00508eab2699b3a51cb4082385eaf}\label{boussinesq__convection_8txt_afcb00508eab2699b3a51cb4082385eaf}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!Basic@{Basic}}
\index{Basic@{Basic}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{Basic()}{Basic()}}
{\footnotesize\ttfamily it is called internally by the function c the helper functions convert the mesh containing the external elements into a c Mesh\+As\+Geom\+Object a compound c Geom\+Object in which the constituent finite elements act as sub c Geom\+Objects Given the Eulerian coordinates of a target the function c calling c Finite\+Element\+::locate\+\_\+zeta (...) until the required \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is located. The function \textbackslash{}c Finite\+Element the efficiency gains \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} achieved by choosing a sensible search order so that the element containing the \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is found quickly$<$hr$>$ subsection impl Basic (\begin{DoxyParamCaption}\item[{serial}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{boussinesq__convection_8txt_ad682b707a17e76aa2dbaafda5eb1ea91}\label{boussinesq__convection_8txt_ad682b707a17e76aa2dbaafda5eb1ea91}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!cheap@{cheap}}
\index{cheap@{cheap}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{cheap()}{cheap()}}
{\footnotesize\ttfamily the sampling points in the same as the element s plot points and \mbox{\hyperlink{boussinesq__convection_8txt_a2e32fc8f467783c204660c69fca90951}{their}} number may be obtained from the c even if the target \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is contained in the element Increasing the number of sampling points ensures that more of them \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} close to the target thus improving the chances that the Newton method will converge An increase in the number of sampling points can lead to a significant increase in the multi domain setup however In the present the elements \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} only stretched in the coordinate directions so a small number of sample points per element the setup of the multi domain interactions tends to be relatively cheap (\begin{DoxyParamCaption}\item[{compared to other phases of a typical}]{computation }\end{DoxyParamCaption})}

\mbox{\Hypertarget{boussinesq__convection_8txt_a8cb7bc96a2ec61fe51b7b81e7ca542df}\label{boussinesq__convection_8txt_a8cb7bc96a2ec61fe51b7b81e7ca542df}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!doc\_solution@{doc\_solution}}
\index{doc\_solution@{doc\_solution}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{doc\_solution()}{doc\_solution()}}
{\footnotesize\ttfamily the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} is \mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}} with a simple call to c apart from the addition of the c discussed below$<$HR$>$ subsection actions\+\_\+after\+\_\+adapt Actions after adaptation The boundary conditions \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} such that a single pressure degree of freedom must be pinned after the adaptation Once the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} has been pinning the first pressure freedom in the first element no longer works because the first element will be different on each processor The required modifications mirror those in the$<$a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../adaptive\+\_\+driven\+\_\+cavity/html/index.\+html\char`\"{}$>$ adaptive driven cavity \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}}$<$/a$>$ and ensure that the pressure is only pinned in the first element in the mesh by testing the Eulerian position of the element The remainder of the function is the same as in the serial driver code dontinclude multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convection cc skipline Actions after adaptation until$<$HR$>$ subsection \mbox{\hyperlink{boussinesq__convection_8txt_a472f479ab997a5a2d889405dce0b7c39}{actions\+\_\+after\+\_\+distribute}} Actions after \mbox{\hyperlink{boussinesq__convection_8txt_acc34b8841d1c42cceb1770cc872fd126}{distribution}} After the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} the multi domain interactions must be set up again because some of the external elements may now only exist on other processors Such elements \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} re created locally as external halo elements when c the c doc\+\_\+solution (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{boussinesq__convection_8txt_aa9fc119ad80e517a5177a09808e399af}\label{boussinesq__convection_8txt_aa9fc119ad80e517a5177a09808e399af}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!domains@{domains}}
\index{domains@{domains}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{domains()}{domains()}}
{\footnotesize\ttfamily \mbox{\hyperlink{boussinesq__convection_8txt_a3fd838e673976f66edb6467367d128e7}{endcode}} may be used to set up multi domain interactions for problems in which the interaction occurs across the boundaries of adjacent domains (\begin{DoxyParamCaption}\item[{$<$ em $>$ e.\+g.$<$/em $>$ in F\+SI problems where the fluid and solid domains meet along a lower-\/dimensional}]{interface }\end{DoxyParamCaption})}

\mbox{\Hypertarget{boussinesq__convection_8txt_a3fd838e673976f66edb6467367d128e7}\label{boussinesq__convection_8txt_a3fd838e673976f66edb6467367d128e7}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!endcode@{endcode}}
\index{endcode@{endcode}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{endcode()}{endcode()}}
{\footnotesize\ttfamily endcode (\begin{DoxyParamCaption}\item[{note the}]{singular }\end{DoxyParamCaption})}

\mbox{\Hypertarget{boussinesq__convection_8txt_ad0de0d1da8264c20e566a642a54e36a5}\label{boussinesq__convection_8txt_ad0de0d1da8264c20e566a642a54e36a5}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!setup\_multi\_domain\_interaction$<$ ELEMENT\_0 $>$@{setup\_multi\_domain\_interaction$<$ ELEMENT\_0 $>$}}
\index{setup\_multi\_domain\_interaction$<$ ELEMENT\_0 $>$@{setup\_multi\_domain\_interaction$<$ ELEMENT\_0 $>$}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{setup\_multi\_domain\_interaction$<$ ELEMENT\_0 $>$()}{setup\_multi\_domain\_interaction< ELEMENT\_0 >()}}
{\footnotesize\ttfamily setup\+\_\+multi\+\_\+domain\+\_\+interaction$<$ \mbox{\hyperlink{boussinesq__convection_8txt_ac99f9c2c12c1f839d9e86af1b927ca3a}{E\+L\+E\+M\+E\+N\+T\+\_\+0}} $>$ (\begin{DoxyParamCaption}\item[{problem\+\_\+pt}]{,  }\item[{\mbox{\hyperlink{boussinesq__convection_8txt_ae55dc27b6a9169b989fbdb65e21a2e98}{second\+\_\+mesh\+\_\+pt}}}]{,  }\item[{\mbox{\hyperlink{boussinesq__convection_8txt_a707b60a792e911d3fa7d844de3c21d8a}{first\+\_\+mesh\+\_\+pt}}}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{boussinesq__convection_8txt_a15a095909692c48e1e31dac9df3387a3}\label{boussinesq__convection_8txt_a15a095909692c48e1e31dac9df3387a3}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!setup\_multi\_domain\_interaction$<$ ELEMENT\_1 $>$@{setup\_multi\_domain\_interaction$<$ ELEMENT\_1 $>$}}
\index{setup\_multi\_domain\_interaction$<$ ELEMENT\_1 $>$@{setup\_multi\_domain\_interaction$<$ ELEMENT\_1 $>$}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{setup\_multi\_domain\_interaction$<$ ELEMENT\_1 $>$()}{setup\_multi\_domain\_interaction< ELEMENT\_1 >()}}
{\footnotesize\ttfamily but not vice versa In the two way interaction described above is performed by two successive calls to this function code setup\+\_\+multi\+\_\+domain\+\_\+interaction$<$ E\+L\+E\+M\+E\+N\+T\+\_\+1 $>$ (\begin{DoxyParamCaption}\item[{problem\+\_\+pt}]{,  }\item[{\mbox{\hyperlink{boussinesq__convection_8txt_a707b60a792e911d3fa7d844de3c21d8a}{first\+\_\+mesh\+\_\+pt}}}]{,  }\item[{\mbox{\hyperlink{boussinesq__convection_8txt_ae55dc27b6a9169b989fbdb65e21a2e98}{second\+\_\+mesh\+\_\+pt}}}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{boussinesq__convection_8txt_a2e32fc8f467783c204660c69fca90951}\label{boussinesq__convection_8txt_a2e32fc8f467783c204660c69fca90951}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!their@{their}}
\index{their@{their}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{their()}{their()}}
{\footnotesize\ttfamily namespace also provides functions that can be used for problems in which the interacting \mbox{\hyperlink{boussinesq__convection_8txt_aa9fc119ad80e517a5177a09808e399af}{domains}} meet at a lower dimensional interface$<$em$>$ e g$<$/em$>$ in fluid structure interaction problems The functions have a sensible default behaviour and can be used as block box routines We provide a brief overview of their (\begin{DoxyParamCaption}\item[{serial and}]{parallel }\end{DoxyParamCaption})}



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}\label{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!are@{are}}
\index{are@{are}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{are}{are}}
{\footnotesize\ttfamily the sampling points are}



Definition at line 486 of file boussinesq\+\_\+convection.\+txt.

\mbox{\Hypertarget{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}\label{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!distributed@{distributed}}
\index{distributed@{distributed}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{distributed}{distributed}}
{\footnotesize\ttfamily the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} is distributed with a simple call to c apart from the addition of the c discussed below$<$HR$>$ subsection actions\+\_\+after\+\_\+adapt Actions after adaptation The boundary conditions \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} such that a single pressure degree of freedom must be pinned after the adaptation Once the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} has been distributed}



Definition at line 81 of file boussinesq\+\_\+convection.\+txt.

\mbox{\Hypertarget{boussinesq__convection_8txt_acc34b8841d1c42cceb1770cc872fd126}\label{boussinesq__convection_8txt_acc34b8841d1c42cceb1770cc872fd126}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!distribution@{distribution}}
\index{distribution@{distribution}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{distribution}{distribution}}
{\footnotesize\ttfamily the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} is \mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}} with a simple call to c apart from the addition of the c discussed below$<$HR$>$ subsection actions\+\_\+after\+\_\+adapt Actions after adaptation The boundary conditions \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} such that a single pressure degree of freedom must be pinned after the adaptation Once the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} has been pinning the first pressure freedom in the first element no longer works because the first element will be different on each processor The required modifications mirror those in the$<$a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../adaptive\+\_\+driven\+\_\+cavity/html/index.\+html\char`\"{}$>$ adaptive driven cavity \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}}$<$/a$>$ and ensure that the pressure is only pinned in the first element in the mesh by testing the Eulerian position of the element The remainder of the function is the same as in the serial driver code dontinclude multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convection cc skipline Actions after adaptation until$<$HR$>$ subsection \mbox{\hyperlink{boussinesq__convection_8txt_a472f479ab997a5a2d889405dce0b7c39}{actions\+\_\+after\+\_\+distribute}} Actions after distribution After the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} distribution}



Definition at line 100 of file boussinesq\+\_\+convection.\+txt.

\mbox{\Hypertarget{boussinesq__convection_8txt_ac99f9c2c12c1f839d9e86af1b927ca3a}\label{boussinesq__convection_8txt_ac99f9c2c12c1f839d9e86af1b927ca3a}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!ELEMENT\_0@{ELEMENT\_0}}
\index{ELEMENT\_0@{ELEMENT\_0}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{ELEMENT\_0}{ELEMENT\_0}}
{\footnotesize\ttfamily \mbox{\hyperlink{boussinesq__convection_8txt_a3fd838e673976f66edb6467367d128e7}{endcode}} sets up a two way interaction between two \mbox{\hyperlink{boussinesq__convection_8txt_aa9fc119ad80e517a5177a09808e399af}{domains}} of the same spatial dimension represented by c a mesh of elements of type c E\+L\+E\+M\+E\+N\+T\+\_\+0}



Definition at line 157 of file boussinesq\+\_\+convection.\+txt.

\mbox{\Hypertarget{boussinesq__convection_8txt_acb4d2c18c1a61d70a43f645f925a9f9a}\label{boussinesq__convection_8txt_acb4d2c18c1a61d70a43f645f925a9f9a}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!fact@{fact}}
\index{fact@{fact}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{fact}{fact}}
{\footnotesize\ttfamily the sampling points in fact}



Definition at line 184 of file boussinesq\+\_\+convection.\+txt.

\mbox{\Hypertarget{boussinesq__convection_8txt_ad241ac225845f23822dafee8cce67441}\label{boussinesq__convection_8txt_ad241ac225845f23822dafee8cce67441}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!Finally@{Finally}}
\index{Finally@{Finally}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{Finally}{Finally}}
{\footnotesize\ttfamily \mbox{\hyperlink{boussinesq__convection_8txt_a3fd838e673976f66edb6467367d128e7}{endcode}} Finally}



Definition at line 197 of file boussinesq\+\_\+convection.\+txt.

\mbox{\Hypertarget{boussinesq__convection_8txt_a707b60a792e911d3fa7d844de3c21d8a}\label{boussinesq__convection_8txt_a707b60a792e911d3fa7d844de3c21d8a}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!first\_mesh\_pt@{first\_mesh\_pt}}
\index{first\_mesh\_pt@{first\_mesh\_pt}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{first\_mesh\_pt}{first\_mesh\_pt}}
{\footnotesize\ttfamily \mbox{\hyperlink{boussinesq__convection_8txt_a3fd838e673976f66edb6467367d128e7}{endcode}} sets up a two way interaction between two \mbox{\hyperlink{boussinesq__convection_8txt_aa9fc119ad80e517a5177a09808e399af}{domains}} of the same spatial dimension represented by c a mesh of elements of type c and c a mesh of elements of type c E\+L\+E\+M\+E\+N\+T\+\_\+1 Both c \mbox{\hyperlink{boussinesq__convection_8txt_ac99f9c2c12c1f839d9e86af1b927ca3a}{E\+L\+E\+M\+E\+N\+T\+\_\+0}} and c E\+L\+E\+M\+E\+N\+T\+\_\+1 must inherit from c Element\+With\+External\+Elements The function loops over the integration points of all the elements in c first\+\_\+mesh\+\_\+pt and establishes which external element in c \mbox{\hyperlink{boussinesq__convection_8txt_ae55dc27b6a9169b989fbdb65e21a2e98}{second\+\_\+mesh\+\_\+pt}} covers the same spatial position as the integration \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} A pointer to this external element and the appropriate coordinate \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} stored in the element in the c first\+\_\+mesh\+\_\+pt}



Definition at line 156 of file boussinesq\+\_\+convection.\+txt.

\mbox{\Hypertarget{boussinesq__convection_8txt_a31ddf705989d1e2674d2ff85f7166a89}\label{boussinesq__convection_8txt_a31ddf705989d1e2674d2ff85f7166a89}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!follows@{follows}}
\index{follows@{follows}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{follows}{follows}}
{\footnotesize\ttfamily it is called internally by the function c the helper functions convert the mesh containing the external elements into a c Mesh\+As\+Geom\+Object a compound c Geom\+Object in which the constituent finite elements act as sub c Geom\+Objects Given the Eulerian coordinates of a target the function c calling c Finite\+Element\+::locate\+\_\+zeta (...) until the required \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is located. The function \textbackslash{}c Finite\+Element the efficiency gains \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} achieved by choosing a sensible search order so that the element containing the \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is found quickly$<$hr$>$ subsection impl the constructor of the c Mesh\+As\+Geom\+Object automatically creates a bin structure that aids the identification of elements that \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} close to a given target \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} The setup of the bin structure is performed as follows}



Definition at line 273 of file boussinesq\+\_\+convection.\+txt.

\mbox{\Hypertarget{boussinesq__convection_8txt_a96523c0123a943b4d4c5b5d298ee8faa}\label{boussinesq__convection_8txt_a96523c0123a943b4d4c5b5d298ee8faa}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!II@{II}}
\index{II@{II}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{II}{II}}
{\footnotesize\ttfamily the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} is \mbox{\hyperlink{boussinesq__convection_8txt_a9256625e8cf9ab7d8142b1eecf964d81}{distributed}} with a simple call to c apart from the addition of the c discussed below$<$HR$>$ subsection actions\+\_\+after\+\_\+adapt Actions after adaptation The boundary conditions \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} such that a single pressure degree of freedom must be pinned after the adaptation Once the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} has been pinning the first pressure freedom in the first element no longer works because the first element will be different on each processor The required modifications mirror those in the$<$a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../adaptive\+\_\+driven\+\_\+cavity/html/index.\+html\char`\"{}$>$ adaptive driven cavity \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}}$<$/a$>$ and ensure that the pressure is only pinned in the first element in the mesh by testing the Eulerian position of the element The remainder of the function is the same as in the serial driver code dontinclude multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convection cc skipline Actions after adaptation until$<$HR$>$ subsection \mbox{\hyperlink{boussinesq__convection_8txt_a472f479ab997a5a2d889405dce0b7c39}{actions\+\_\+after\+\_\+distribute}} Actions after \mbox{\hyperlink{boussinesq__convection_8txt_acc34b8841d1c42cceb1770cc872fd126}{distribution}} After the \mbox{\hyperlink{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}{problem}} the multi domain interactions must be set up again because some of the external elements may now only exist on other processors Such elements \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} re created locally as external halo elements when c the c ensuring that output from one processor does not overwrite that from another$<$HR$>$ The remainder of the driver code is identical to the$<$a \mbox{\hyperlink{boussinesq__convection_8txt_a90bde6107ef4c4dc27aaa2627e22a2ac}{href}}=\char`\"{}../../../multi\+\_\+physics/multi\+\_\+domain\+\_\+ref\+\_\+b\+\_\+convect/html/index.\+html\char`\"{}$>$ serial version$<$/a$>$$<$HR$>$$<$HR$>$ section multi\+\_\+domain Part II}



Definition at line 133 of file boussinesq\+\_\+convection.\+txt.

\mbox{\Hypertarget{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}\label{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!point@{point}}
\index{point@{point}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{point}{point}}
{\footnotesize\ttfamily the sampling points in the same as the element s plot points and \mbox{\hyperlink{boussinesq__convection_8txt_a2e32fc8f467783c204660c69fca90951}{their}} number may be obtained from the c even if the target point is contained in the element Increasing the number of sampling points ensures that more of them \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} close to the target point}



Definition at line 225 of file boussinesq\+\_\+convection.\+txt.

\mbox{\Hypertarget{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}\label{boussinesq__convection_8txt_a52ec8020ca2d5d6942dd26588deddbd5}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!problem@{problem}}
\index{problem@{problem}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{problem}{problem}}
{\footnotesize\ttfamily the sampling points in the same as the element s plot points and \mbox{\hyperlink{boussinesq__convection_8txt_a2e32fc8f467783c204660c69fca90951}{their}} number may be obtained from the c even if the target \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is contained in the element Increasing the number of sampling points ensures that more of them \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} close to the target thus improving the chances that the Newton method will converge An increase in the number of sampling points can lead to a significant increase in the multi domain setup however In the present problem}



Definition at line 4 of file boussinesq\+\_\+convection.\+txt.

\mbox{\Hypertarget{boussinesq__convection_8txt_a208ac0b754fef0fba769b755935790d1}\label{boussinesq__convection_8txt_a208ac0b754fef0fba769b755935790d1}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!safety@{safety}}
\index{safety@{safety}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{safety}{safety}}
{\footnotesize\ttfamily it is called internally by the function c the helper functions convert the mesh containing the external elements into a c Mesh\+As\+Geom\+Object a compound c Geom\+Object in which the constituent finite elements act as sub c Geom\+Objects Given the Eulerian coordinates of a target the function c calling c Finite\+Element\+::locate\+\_\+zeta (...) until the required \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is located. The function \textbackslash{}c Finite\+Element the efficiency gains \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} achieved by choosing a sensible search order so that the element containing the \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is found quickly$<$hr$>$ subsection impl the constructor of the c Mesh\+As\+Geom\+Object automatically creates a bin structure that aids the identification of elements that \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} close to a given target \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} The setup of the bin structure is performed as plus a small margin for safety}



Definition at line 273 of file boussinesq\+\_\+convection.\+txt.

\mbox{\Hypertarget{boussinesq__convection_8txt_ae55dc27b6a9169b989fbdb65e21a2e98}\label{boussinesq__convection_8txt_ae55dc27b6a9169b989fbdb65e21a2e98}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!second\_mesh\_pt@{second\_mesh\_pt}}
\index{second\_mesh\_pt@{second\_mesh\_pt}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{second\_mesh\_pt}{second\_mesh\_pt}}
{\footnotesize\ttfamily \mbox{\hyperlink{boussinesq__convection_8txt_a3fd838e673976f66edb6467367d128e7}{endcode}} sets up a two way interaction between two \mbox{\hyperlink{boussinesq__convection_8txt_aa9fc119ad80e517a5177a09808e399af}{domains}} of the same spatial dimension represented by c a mesh of elements of type c and c second\+\_\+mesh\+\_\+pt}



Definition at line 157 of file boussinesq\+\_\+convection.\+txt.

\mbox{\Hypertarget{boussinesq__convection_8txt_ae02b9922a98c0abea6b360f394f66eec}\label{boussinesq__convection_8txt_ae02b9922a98c0abea6b360f394f66eec}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!suffices@{suffices}}
\index{suffices@{suffices}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{suffices}{suffices}}
{\footnotesize\ttfamily the sampling points in the same as the element s plot points and \mbox{\hyperlink{boussinesq__convection_8txt_a2e32fc8f467783c204660c69fca90951}{their}} number may be obtained from the c even if the target \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is contained in the element Increasing the number of sampling points ensures that more of them \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} close to the target thus improving the chances that the Newton method will converge An increase in the number of sampling points can lead to a significant increase in the multi domain setup however In the present the elements \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} only stretched in the coordinate directions so a small number of sample points per element suffices}



Definition at line 510 of file boussinesq\+\_\+convection.\+txt.

\mbox{\Hypertarget{boussinesq__convection_8txt_a9b2e8175b36ee8f31144378819b372c0}\label{boussinesq__convection_8txt_a9b2e8175b36ee8f31144378819b372c0}} 
\index{boussinesq\_convection.txt@{boussinesq\_convection.txt}!times@{times}}
\index{times@{times}!boussinesq\_convection.txt@{boussinesq\_convection.txt}}
\doxysubsubsection{\texorpdfstring{times}{times}}
{\footnotesize\ttfamily the sampling points in the same as the element s plot points and \mbox{\hyperlink{boussinesq__convection_8txt_a2e32fc8f467783c204660c69fca90951}{their}} number may be obtained from the c even if the target \mbox{\hyperlink{boussinesq__convection_8txt_ae3bb27d416acc05f4d256fc778ca4c79}{point}} is contained in the element Increasing the number of sampling points ensures that more of them \mbox{\hyperlink{boussinesq__convection_8txt_aaf55cd080e279c6a35847655b0746c86}{are}} close to the target thus improving the chances that the Newton method will converge An increase in the number of sampling points can lead to a significant increase in the multi domain setup times}



Definition at line 499 of file boussinesq\+\_\+convection.\+txt.

